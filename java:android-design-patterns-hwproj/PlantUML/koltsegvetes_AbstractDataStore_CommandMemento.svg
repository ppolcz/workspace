<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1970pt" style="width:2193px;height:1970px;" version="1.1" viewBox="0 0 2193 1970" width="2193pt"><defs><filter height="300%" id="f1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><polygon fill="#FFFFFF" filter="url(#f1)" points="23,534,122,534,129,556.2969,1588,556.2969,1588,1467,23,1467,23,534" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="23" x2="129" y1="556.2969" y2="556.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="26" y="549.9951">CoreLibrary</text><polygon fill="#FFFFFF" filter="url(#f1)" points="47,578,171,578,178,600.2969,1564,600.2969,1564,1443,47,1443,47,578" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="47" x2="178" y1="600.2969" y2="600.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="50" y="593.9951">CoreLibrary.db</text><polygon fill="#FFFFFF" filter="url(#f1)" points="239,634,437,634,444,656.2969,683,656.2969,683,993,239,993,239,634" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="239" x2="444" y1="656.2969" y2="656.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="242" y="649.9951">CoreLibrary.db.listeners</text><rect fill="#FEFECE" filter="url(#f1)" height="137.6328" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="1240" y="635"/><ellipse cx="1299.75" cy="651" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1299.8594,646.3438 L1298.7031,651.4219 L1301.0313,651.4219 L1299.8594,646.3438 Z M1298.375,644.1094 L1301.3594,644.1094 L1304.7188,656.5 L1302.2656,656.5 L1301.5,653.4375 L1298.2188,653.4375 L1297.4688,656.5 L1295.0313,656.5 L1298.375,644.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="1320.25" y="655.1543">AbstractDataStore</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1241" x2="1483" y1="667" y2="667"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1248" y="675.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="1260" y="681.2104">helper : ISQLiteHelper</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1248" y="688.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="1260" y="694.0151">commands : List&lt;Command&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1248" y="701.5117"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="1260" y="706.8198">actualState : List&lt;Command&gt;.Iterator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1241" x2="1483" y1="713.4141" y2="713.4141"/><ellipse cx="1251" cy="725.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="1260" y="727.6245">acceptCommand(Command) : Query</text><ellipse cx="1251" cy="738.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1260" y="740.4292">undo() : bool</text><ellipse cx="1251" cy="750.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="1260" y="753.2339">redo() : bool</text><ellipse cx="1251" cy="763.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="1260" y="766.0386">resetRedoList()</text><rect fill="#FEFECE" filter="url(#f1)" height="32" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="73" y="687"/><ellipse cx="88" cy="703" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M90.9688,708.6406 Q90.3906,708.9375 89.75,709.0859 Q89.1094,709.2344 88.4063,709.2344 Q85.9063,709.2344 84.5859,707.5859 Q83.2656,705.9375 83.2656,702.8125 Q83.2656,699.6875 84.5859,698.0313 Q85.9063,696.375 88.4063,696.375 Q89.1094,696.375 89.7578,696.5313 Q90.4063,696.6875 90.9688,696.9844 L90.9688,699.7031 Q90.3438,699.125 89.75,698.8516 Q89.1563,698.5781 88.5313,698.5781 Q87.1875,698.5781 86.5,699.6484 Q85.8125,700.7188 85.8125,702.8125 Q85.8125,704.9063 86.5,705.9766 Q87.1875,707.0469 88.5313,707.0469 Q89.1563,707.0469 89.75,706.7734 Q90.3438,706.5 90.9688,705.9219 L90.9688,708.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="102" y="707.1543">Query</text><rect fill="#FEFECE" filter="url(#f1)" height="78.4141" style="stroke: #A80036; stroke-width: 1.5;" width="373" x="1176" y="911"/><ellipse cx="1316.25" cy="927" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1312.1719,922.7656 L1312.1719,920.6094 L1319.5625,920.6094 L1319.5625,922.7656 L1317.0938,922.7656 L1317.0938,930.8438 L1319.5625,930.8438 L1319.5625,933 L1312.1719,933 L1312.1719,930.8438 L1314.6406,930.8438 L1314.6406,922.7656 L1312.1719,922.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="1336.75" y="931.1543">ISQLiteHelper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1177" x2="1548" y1="943" y2="943"/><ellipse cx="1187" cy="954.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="204" x="1196" y="957.2104">execSQL(String sqlcommand) : bool</text><ellipse cx="1187" cy="967.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="347" x="1196" y="970.0151">execSQL(String sqlcommand, EColumnNames[] cols) : Query</text><ellipse cx="1187" cy="980.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1196" y="982.8198">lastInsertRowID() : int</text><rect fill="#FEFECE" filter="url(#f1)" height="154.4375" style="stroke: #A80036; stroke-width: 1.5;" width="278" x="840" y="874"/><ellipse cx="943.75" cy="890" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M946.7188,895.6406 Q946.1406,895.9375 945.5,896.0859 Q944.8594,896.2344 944.1563,896.2344 Q941.6563,896.2344 940.3359,894.5859 Q939.0156,892.9375 939.0156,889.8125 Q939.0156,886.6875 940.3359,885.0313 Q941.6563,883.375 944.1563,883.375 Q944.8594,883.375 945.5078,883.5313 Q946.1563,883.6875 946.7188,883.9844 L946.7188,886.7031 Q946.0938,886.125 945.5,885.8516 Q944.9063,885.5781 944.2813,885.5781 Q942.9375,885.5781 942.25,886.6484 Q941.5625,887.7188 941.5625,889.8125 Q941.5625,891.9063 942.25,892.9766 Q942.9375,894.0469 944.2813,894.0469 Q944.9063,894.0469 945.5,893.7734 Q946.0938,893.5 946.7188,892.9219 L946.7188,895.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="964.25" y="894.1543">Command</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="841" x2="1117" y1="906" y2="906"/><polygon fill="none" points="851,912.9023,855,916.9023,851,920.9023,847,916.9023" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="860" y="920.2104">undoable : bool = True</text><polygon fill="none" points="851,925.707,855,929.707,851,933.707,847,929.707" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="860" y="933.0151">sqlCommand : String[] = {}</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="26" x="1024" y="933.0151">-- do</text><polygon fill="none" points="851,938.5117,855,942.5117,851,946.5117,847,942.5117" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="860" y="945.8198">memento : Memento = null</text><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="1019" y="945.8198">-- undo</text><polygon fill="none" points="851,968.1211,855,972.1211,851,976.1211,847,972.1211" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="860" y="975.4292">listener : OnExecutedListener</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="841" x2="955.5" y1="958.8164" y2="958.8164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="955.5" y="962.1245">auxiliary</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="1002.5" x2="1117" y1="958.8164" y2="958.8164"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="841" x2="1117" y1="982.0234" y2="982.0234"/><ellipse cx="851" cy="993.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="252" x="860" y="996.2339">setOnExecutedListener(OnExecutedListener)</text><polygon fill="#4177AF" points="851,1002.7305,847,1008.7305,855,1008.7305" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="860" y="1009.0386">do(ISQLiteHelper) : bool</text><polygon fill="#4177AF" points="851,1015.5352,847,1021.5352,855,1021.5352" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="860" y="1021.8433">undo(ISQLiteHelper) : bool</text><rect fill="#FEFECE" filter="url(#f1)" height="65.6094" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="885" y="670"/><ellipse cx="908.55" cy="686" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M911.5188,691.6406 Q910.9406,691.9375 910.3,692.0859 Q909.6594,692.2344 908.9563,692.2344 Q906.4563,692.2344 905.1359,690.5859 Q903.8156,688.9375 903.8156,685.8125 Q903.8156,682.6875 905.1359,681.0313 Q906.4563,679.375 908.9563,679.375 Q909.6594,679.375 910.3078,679.5313 Q910.9563,679.6875 911.5188,679.9844 L911.5188,682.7031 Q910.8938,682.125 910.3,681.8516 Q909.7063,681.5781 909.0813,681.5781 Q907.7375,681.5781 907.05,682.6484 Q906.3625,683.7188 906.3625,685.8125 Q906.3625,687.9063 907.05,688.9766 Q907.7375,690.0469 909.0813,690.0469 Q909.7063,690.0469 910.3,689.7734 Q910.8938,689.5 911.5188,688.9219 L911.5188,691.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="924.45" y="690.1543">Memento</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="886" x2="993" y1="702" y2="702"/><ellipse cx="896" cy="713.9023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="905" y="716.2104">before : Query</text><ellipse cx="896" cy="726.707" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="905" y="729.0151">after : Query</text><rect fill="#FEFECE" filter="url(#f1)" height="73.6094" style="stroke: #A80036; stroke-width: 1.5;" width="417" x="63" y="1334"/><ellipse cx="213.25" cy="1350" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M216.2188,1355.6406 Q215.6406,1355.9375 215,1356.0859 Q214.3594,1356.2344 213.6563,1356.2344 Q211.1563,1356.2344 209.8359,1354.5859 Q208.5156,1352.9375 208.5156,1349.8125 Q208.5156,1346.6875 209.8359,1345.0313 Q211.1563,1343.375 213.6563,1343.375 Q214.3594,1343.375 215.0078,1343.5313 Q215.6563,1343.6875 216.2188,1343.9844 L216.2188,1346.7031 Q215.5938,1346.125 215,1345.8516 Q214.4063,1345.5781 213.7813,1345.5781 Q212.4375,1345.5781 211.75,1346.6484 Q211.0625,1347.7188 211.0625,1349.8125 Q211.0625,1351.9063 211.75,1352.9766 Q212.4375,1354.0469 213.7813,1354.0469 Q214.4063,1354.0469 215,1353.7734 Q215.5938,1353.5 216.2188,1352.9219 L216.2188,1355.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="233.75" y="1354.1543">UpdateCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="64" x2="479" y1="1366" y2="1366"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="64" x2="479" y1="1374" y2="1374"/><ellipse cx="74" cy="1385.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="391" x="83" y="1388.2104">UpdateCommand(String where, EColumnNames[] cols, Object[] vals)</text><polygon fill="#4177AF" points="74,1394.707,70,1400.707,78,1400.707" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="83" y="1401.0151">@override</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="146" y="1401.0151">do(ISQLiteHelper) : bool</text><rect fill="#FEFECE" filter="url(#f1)" height="73.6094" style="stroke: #A80036; stroke-width: 1.5;" width="304" x="514" y="1334"/><ellipse cx="606.25" cy="1350" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M609.2188,1355.6406 Q608.6406,1355.9375 608,1356.0859 Q607.3594,1356.2344 606.6563,1356.2344 Q604.1563,1356.2344 602.8359,1354.5859 Q601.5156,1352.9375 601.5156,1349.8125 Q601.5156,1346.6875 602.8359,1345.0313 Q604.1563,1343.375 606.6563,1343.375 Q607.3594,1343.375 608.0078,1343.5313 Q608.6563,1343.6875 609.2188,1343.9844 L609.2188,1346.7031 Q608.5938,1346.125 608,1345.8516 Q607.4063,1345.5781 606.7813,1345.5781 Q605.4375,1345.5781 604.75,1346.6484 Q604.0625,1347.7188 604.0625,1349.8125 Q604.0625,1351.9063 604.75,1352.9766 Q605.4375,1354.0469 606.7813,1354.0469 Q607.4063,1354.0469 608,1353.7734 Q608.5938,1353.5 609.2188,1352.9219 L609.2188,1355.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="626.75" y="1354.1543">RemoveCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="515" x2="817" y1="1366" y2="1366"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="515" x2="817" y1="1374" y2="1374"/><ellipse cx="525" cy="1385.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="278" x="534" y="1388.2104">RemoveCommand(ETableNames t, String where)</text><polygon fill="#4177AF" points="525,1394.707,521,1400.707,529,1400.707" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="534" y="1401.0151">@override</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="597" y="1401.0151">do(ISQLiteHelper) : bool</text><rect fill="#FEFECE" filter="url(#f1)" height="112.0234" style="stroke: #A80036; stroke-width: 1.5;" width="333" x="1216" y="1315"/><ellipse cx="1327.75" cy="1331" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1330.7188,1336.6406 Q1330.1406,1336.9375 1329.5,1337.0859 Q1328.8594,1337.2344 1328.1563,1337.2344 Q1325.6563,1337.2344 1324.3359,1335.5859 Q1323.0156,1333.9375 1323.0156,1330.8125 Q1323.0156,1327.6875 1324.3359,1326.0313 Q1325.6563,1324.375 1328.1563,1324.375 Q1328.8594,1324.375 1329.5078,1324.5313 Q1330.1563,1324.6875 1330.7188,1324.9844 L1330.7188,1327.7031 Q1330.0938,1327.125 1329.5,1326.8516 Q1328.9063,1326.5781 1328.2813,1326.5781 Q1326.9375,1326.5781 1326.25,1327.6484 Q1325.5625,1328.7188 1325.5625,1330.8125 Q1325.5625,1332.9063 1326.25,1333.9766 Q1326.9375,1335.0469 1328.2813,1335.0469 Q1328.9063,1335.0469 1329.5,1334.7734 Q1330.0938,1334.5 1330.7188,1333.9219 L1330.7188,1336.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="1348.25" y="1335.1543">SelectCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1217" x2="1548" y1="1347" y2="1347"/><polygon fill="none" points="1227,1353.9023,1231,1357.9023,1227,1361.9023,1223,1357.9023" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="1236" y="1361.2104">undoable : bool = False</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1217" x2="1548" y1="1367.8047" y2="1367.8047"/><ellipse cx="1227" cy="1379.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="226" x="1236" y="1382.0151">SelectCommand(EColumnNames[] cols)</text><ellipse cx="1227" cy="1392.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="307" x="1236" y="1394.8198">SelectCommand(String where, EColumnNames[] cols)</text><ellipse cx="1227" cy="1405.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="268" x="1236" y="1407.6245">SelectCommand(ETableNames t, String where)</text><polygon fill="#4177AF" points="1227,1414.1211,1223,1420.1211,1231,1420.1211" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="1236" y="1420.4292">@override</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="1299" y="1420.4292">do(ISQLiteHelper) : bool</text><rect fill="#FEFECE" filter="url(#f1)" height="73.6094" style="stroke: #A80036; stroke-width: 1.5;" width="329" x="853" y="1334"/><ellipse cx="964.25" cy="1350" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M967.2188,1355.6406 Q966.6406,1355.9375 966,1356.0859 Q965.3594,1356.2344 964.6563,1356.2344 Q962.1563,1356.2344 960.8359,1354.5859 Q959.5156,1352.9375 959.5156,1349.8125 Q959.5156,1346.6875 960.8359,1345.0313 Q962.1563,1343.375 964.6563,1343.375 Q965.3594,1343.375 966.0078,1343.5313 Q966.6563,1343.6875 967.2188,1343.9844 L967.2188,1346.7031 Q966.5938,1346.125 966,1345.8516 Q965.4063,1345.5781 964.7813,1345.5781 Q963.4375,1345.5781 962.75,1346.6484 Q962.0625,1347.7188 962.0625,1349.8125 Q962.0625,1351.9063 962.75,1352.9766 Q963.4375,1354.0469 964.7813,1354.0469 Q965.4063,1354.0469 966,1353.7734 Q966.5938,1353.5 967.2188,1352.9219 L967.2188,1355.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="984.75" y="1354.1543">InsertCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="854" x2="1181" y1="1366" y2="1366"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="854" x2="1181" y1="1374" y2="1374"/><ellipse cx="864" cy="1385.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="873" y="1388.2104">InsertCommand(EColumnNames[] cols, Object[] vals)</text><polygon fill="#4177AF" points="864,1394.707,860,1400.707,868,1400.707" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#808080" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="873" y="1401.0151">@override</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="936" y="1401.0151">do(ISQLiteHelper) : bool</text><rect fill="#FEFECE" filter="url(#f1)" height="65.6094" style="stroke: #A80036; stroke-width: 1.5;" width="412" x="255" y="670"/><ellipse cx="392.25" cy="686" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M388.1719,681.7656 L388.1719,679.6094 L395.5625,679.6094 L395.5625,681.7656 L393.0938,681.7656 L393.0938,689.8438 L395.5625,689.8438 L395.5625,692 L388.1719,692 L388.1719,689.8438 L390.6406,689.8438 L390.6406,681.7656 L388.1719,681.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="412.75" y="690.1543">IOnExecutedListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="256" x2="666" y1="702" y2="702"/><ellipse cx="266" cy="713.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="275" y="716.2104">failure(Exception)</text><ellipse cx="266" cy="726.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="386" x="275" y="729.0151">undoFailure(Exception, Memento, Query failedRows, Command self)</text><rect fill="#FEFECE" filter="url(#f1)" height="52.8047" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="283" y="923.5"/><ellipse cx="302.5" cy="939.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M298.4219,935.2656 L298.4219,933.1094 L305.8125,933.1094 L305.8125,935.2656 L303.3438,935.2656 L303.3438,943.3438 L305.8125,943.3438 L305.8125,945.5 L298.4219,945.5 L298.4219,943.3438 L300.8906,943.3438 L300.8906,935.2656 L298.4219,935.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="317.5" y="943.6543">IOnInsertedListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="284" x2="446" y1="955.5" y2="955.5"/><ellipse cx="294" cy="967.4023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="303" y="969.7104">rowIdAvailable(int rowId)</text><rect fill="#FEFECE" filter="url(#f1)" height="52.8047" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="482" y="923.5"/><ellipse cx="497" cy="939.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M492.9219,935.2656 L492.9219,933.1094 L500.3125,933.1094 L500.3125,935.2656 L497.8438,935.2656 L497.8438,943.3438 L500.3125,943.3438 L500.3125,945.5 L492.9219,945.5 L492.9219,943.3438 L495.3906,943.3438 L495.3906,935.2656 L492.9219,935.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="125" x="511" y="943.6543">IOnSelectedListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="483" x2="638" y1="955.5" y2="955.5"/><ellipse cx="493" cy="967.4023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="502" y="969.7104">queryAvailable(Query)</text><polygon fill="#FBFB77" filter="url(#f1)" points="292,220,292,305.6641,630,305.6641,630,230,620,220,292,220" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="292,220,292,305.6641,457,305.6641,461,669.78,465,305.6641,630,305.6641,630,230,620,220,292,220" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="620" x2="620" y1="220" y2="230"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="630" x2="620" y1="230" y2="230"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="298" y="237.0669">eg. print to the GUI if some failure happened.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="298" y="252.1997">In fact I try to design a model in which data loss</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="298" y="267.3325">or inconsistency cannot happen in theory, but we</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="298" y="282.4653">never know... and this type of error is fatal,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="298" y="297.5981">not easy to handle.</text><polygon fill="#FBFB77" filter="url(#f1)" points="675,175,675,351.4609,1163,351.4609,1163,185,1153,175,675,175" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="675,175,675,351.4609,919.011,351.4609,937.49,669.78,927.011,351.4609,1163,351.4609,1163,185,1153,175,675,175" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1153" x2="1153" y1="175" y2="185"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1163" x2="1153" y1="185" y2="185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="681" y="192.0669">We must store</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="778" y="192.0669">before</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="823" y="192.0669">and ALSO</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="30" x="890" y="192.0669">after</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="924" y="192.0669">state because if we allow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="467" x="681" y="207.1997">an SQL update to modify the primary key (but not an autoincrement key)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="447" x="681" y="222.3325">than we cannot recognise which rows were affected by the update istr.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="685" y="237.4653"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="681" y="252.5981">In the case of an SQL remove the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="30" x="899" y="252.5981">after</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="933" y="252.5981">state will be empty.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="685" y="267.731"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="681" y="282.8638">In the case of an SQL insert the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="886" y="282.8638">before</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="931" y="282.8638">state will be empty.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="685" y="297.9966"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="681" y="313.1294">In order to restore we just have to:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="685" y="328.2622">1. remove all rows stored in the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="30" x="890" y="328.2622">after</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="685" y="343.395">2. insert all rows stored in the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="877" y="343.395">before</text><polygon fill="#FBFB77" filter="url(#f1)" points="1604,1108.5,1604,1633.0156,2184,1633.0156,2184,1118.5,2174,1108.5,1604,1108.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2174" x2="2174" y1="1108.5" y2="1118.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2184" x2="2174" y1="1118.5" y2="1118.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1614" y="1125.5669">-</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="1623" y="1125.5669">sqlCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="1712" y="1125.5669">should be a single SQL instruction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1614" y="1140.6997">-</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="126" x="1623" y="1140.6997">sqlUndoCommands</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="1753" y="1140.6997">depending on the sqlCommand can result in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="474" x="1610" y="1155.8325">multiple SQL statements, hence we approach the problem in another way:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="441" x="1610" y="1170.9653">the Memento will store the rows which should be deleted, and others,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="1610" y="1186.0981">which should be inserted</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1614" y="1201.231">-</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="1623" y="1201.231">sqlCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="1712" y="1201.231">is an empty string by default, resulting an empty</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="1610" y="1216.3638">sql statement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1614" y="1231.4966"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="38" x="1610" y="1246.6294">-- The</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1652" y="1246.6294">do</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="377" x="1674" y="1246.6294">method must be decorated and subclasses must generate</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="214" x="1610" y="1261.7622">-- the memento in it if necessary.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1610" y="1276.895">do</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="1629" y="1276.895">(ISQLiteHelper helper)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1292.0278"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="320" x="1626" y="1292.0278">-- sqlCommand has to be initialized by subclasses</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1307.1606"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1626" y="1307.1606">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="1675" y="1307.1606">helper.execSQL(sqlCommand)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1610" y="1322.2935">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1614" y="1337.4263"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="1610" y="1352.5591">redo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="1644" y="1352.5591">(ISQLiteHelper heler)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1367.6919"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="300" x="1626" y="1367.6919">-- memento should be initialized by subclasses</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1382.8247"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1626" y="1382.8247">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="1640" y="1382.8247">(!undoable</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="1713" y="1382.8247">or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1732" y="1382.8247">memento == null)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="1856" y="1382.8247">throw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="1902" y="1382.8247">NotUndoableOrNoMemento()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="1626" y="1397.9575">Query failedRows = {}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1413.0903"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="1626" y="1413.0903">for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="1651" y="1413.0903">(row : memento.after)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1642" y="1428.2231"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1642" y="1428.2231">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="1656" y="1428.2231">(!helper.execSQL(toSql(delete row))) failedRows.add(row)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1443.356"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="1626" y="1443.356">for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1651" y="1443.356">(row : memento.before)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1642" y="1458.4888"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1642" y="1458.4888">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="1656" y="1458.4888">(!helper.execSQL(toSql(insert row))) failedRows.add(row)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1626" y="1473.6216"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1626" y="1473.6216">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="429" x="1640" y="1473.6216">(!failure.empty) listener.undoFailure(ex, memento, failedRows, this)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1610" y="1488.7544">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1614" y="1503.8872"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="403" x="1610" y="1519.02">The create table SQL commands could be each a not undoable</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="2017" y="1519.02">Command</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2092" y="1519.02">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="494" x="1610" y="1534.1528">We shouldn't implement a new class just for create table commands because</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="470" x="1610" y="1549.2856">these are called once in the software's life cycle (when it is first launched).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="540" x="1610" y="1564.4185">These and other initializer commands should be launched by the AbstractDataStore.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1614" y="1579.5513"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="513" x="1610" y="1594.6841">Other specialized commands during the software's life cycle (insert, remove) are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="559" x="1610" y="1609.8169">launched by the higher level modules (eg. GUI), because these commands are given by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="509" x="1610" y="1624.9497">the user (who fills in forms and then submit the changes to AbstractDataStore).</text><polygon fill="#FBFB77" filter="url(#f1)" points="6,1785,6,1870.6641,412,1870.6641,412,1795,402,1785,6,1785" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="6,1785,6,1870.6641,412,1870.6641,412,1795,402,1785,218.874,1785,265.979,1408.011,210.874,1785,6,1785" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402" x2="402" y1="1785" y2="1795"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="412" x2="402" y1="1795" y2="1795"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="16" y="1802.0669">- we assume that the primary key are constant during an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="12" y="1817.1997">update statement (especially an autoincrement integer key)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="16" y="1832.3325">- another possibility:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="28" y="1847.4653">- remove the updated rows</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="28" y="1862.5981">- insert the former rows (which are stored in a 'memento')</text><polygon fill="#FBFB77" filter="url(#f1)" points="812,1694.5,812,1961.7578,1333,1961.7578,1333,1704.5,1323,1694.5,812,1694.5" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="812,1694.5,812,1961.7578,1333,1961.7578,1333,1704.5,1323,1694.5,1059.92,1694.5,1021.45,1408.011,1051.92,1694.5,812,1694.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1323" x2="1323" y1="1694.5" y2="1704.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1333" x2="1323" y1="1704.5" y2="1704.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="818" y="1711.5669">InsertCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="935" y="1711.5669">(EColumnNames[] cols, Object[] vals)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="834" y="1726.6997">- detect table, in which we have to insert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="834" y="1741.8325">- generate SQLite command string ==&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="1097" y="1741.8325">sqlCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="834" y="1756.9653"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="480" x="834" y="1756.9653">we cannot generate memento object yet,  since we do not know the rowId</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="818" y="1772.0981">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="822" y="1787.231"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="818" y="1802.3638">do</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="837" y="1802.3638">(ISQLiteHelper helper)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="834" y="1817.4966">success = super.do(helper)</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="304" x="1014" y="1817.4966">-- execute command using DataStores's helper</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="834" y="1832.6294"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="834" y="1832.6294">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="848" y="1832.6294">(!success)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="850" y="1847.7622">listener.failure(ex)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="850" y="1862.895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="850" y="1862.895">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="899" y="1862.895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="899" y="1862.895">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="834" y="1878.0278"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="834" y="1878.0278">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="834" y="1893.1606">rowId = helper.lastInsertRowID()</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="271" x="1041" y="1893.1606">-- retrieve rowId of the newly inserted row</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="834" y="1908.2935">listener.rowIdAvailable(rowId)</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="189" x="1022" y="1908.2935">-- publish rowId to the sender</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="834" y="1923.4263">generate Memento using the rowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="834" y="1938.5591"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="834" y="1938.5591">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="883" y="1938.5591"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="883" y="1938.5591">true</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="818" y="1953.6919">end</text><polygon fill="#FBFB77" filter="url(#f1)" points="447,1800.5,447,1855.8984,778,1855.8984,778,1810.5,768,1800.5,447,1800.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="768" x2="768" y1="1800.5" y2="1810.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="778" x2="768" y1="1810.5" y2="1810.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="453" y="1817.5669">These two commands may result in multiple</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="453" y="1832.6997">undo SQL instruction since the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="652" y="1832.6997">where</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="696" y="1832.6997">statement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="453" y="1847.8325">can apply multiple SQL tuples</text><polygon fill="#FBFB77" filter="url(#f1)" points="1198,8.5,1198,517.8828,1705,517.8828,1705,18.5,1695,8.5,1198,8.5" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="1198,8.5,1198,517.8828,1395.62,517.8828,1375.94,634.9,1403.62,517.8828,1705,517.8828,1705,18.5,1695,8.5,1198,8.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1695" x2="1695" y1="8.5" y2="18.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1705" x2="1695" y1="18.5" y2="18.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1208" y="25.5669">- commands before the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="73" x="1363" y="25.5669">actualState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="1440" y="25.5669">(including it) are all done - able to undo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="1208" y="40.6997">- commands after the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="73" x="1352" y="40.6997">actualState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="1429" y="40.6997">(exluding it) are all undone - able to redo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1208" y="55.8325"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="1204" y="70.9653">resetRedoList</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="371" x="1306" y="70.9653">() -- clears all items from command's list after actualState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="368" x="1204" y="86.0981">because a new change have been made after some undo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1208" y="101.231"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="1204" y="116.3638">acceptCommand</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1329" y="116.3638">(command):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="131.4966"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="250" x="1220" y="131.4966">-- I store only the undoable commands</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="146.6294"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1220" y="146.6294">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="1234" y="146.6294">(command.undoable)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1236" y="161.7622">resetRedoList()</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="323" x="1337" y="161.7622">-- remove all commands which have been undone</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1236" y="176.895">commands.add(command)</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="251" x="1415" y="176.895">-- add command to the command's list</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="192.0278"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1220" y="192.0278">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="207.1606"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="438" x="1220" y="207.1606">-- can be called an a background thread too in the commands' order</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1220" y="222.2935">redo()</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1204" y="237.4263">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1208" y="252.5591"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="1204" y="267.6919">undo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="1241" y="267.6919">():</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="282.8247"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1220" y="282.8247">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="1234" y="282.8247">(actualState != commands.begin())</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="1236" y="297.9575">actualState-&gt;undo(helper)</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="257" x="1412" y="297.9575">-- call the last command's undo method</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1236" y="313.0903">actualState-&gt;prev()</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="247" x="1368" y="313.0903">-- go to the previously done command</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1236" y="328.2231"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1236" y="328.2231">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1285" y="328.2231"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="1285" y="328.2231">true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="343.356"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1220" y="343.356">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="358.4888"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1220" y="358.4888">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1269" y="358.4888"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="1269" y="358.4888">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1309" y="358.4888"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="162" x="1309" y="358.4888">-- no undoable command</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1204" y="373.6216">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1208" y="388.7544"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="1204" y="403.8872">redo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="1238" y="403.8872">():</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="419.02"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="1220" y="419.02">if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1234" y="419.02">(actualState != commands.end())</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1236" y="434.1528">actualState-&gt;next()</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="254" x="1368" y="434.1528">-- once the next command was undone</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="1236" y="449.2856">actualState-&gt;do(helper)</text><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="168" x="1396" y="449.2856">-- do that command again</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1236" y="464.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1236" y="464.4185">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1285" y="464.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="1285" y="464.4185">true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="479.5513"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1220" y="479.5513">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1220" y="494.6841"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1220" y="494.6841">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1269" y="494.6841"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="1269" y="494.6841">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1309" y="494.6841"/><text fill="#808080" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="159" x="1309" y="494.6841">-- no redoable command</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1204" y="509.8169">end</text><path d="M820.632,1003.098 C776.128,1017.684 727.686,1033.51 683,1048 C599.972,1074.924 568.683,1059.671 496,1108 C404.432,1168.886 328.802,1277.117 293.115,1333.892 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="818.587,996.402,839.772,996.822,822.949,1009.705,818.587,996.402" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M889.805,1042.996 C871.014,1063.799 851.807,1086.196 835,1108 C776.021,1184.515 717.355,1281.776 687.081,1333.941 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="884.71,1038.195,903.373,1028.162,895.04,1047.644,884.71,1038.195" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1119.18,1040.043 C1147.06,1060.707 1175.08,1083.796 1199,1108 C1261.66,1171.406 1317.58,1258.486 1350.64,1314.756 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1114.89,1045.578,1102.82,1028.166,1123.11,1034.247,1114.89,1045.578" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M987.772,1047.954 C996.01,1139.007 1007.9,1270.455 1013.65,1333.929 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="980.801,1048.584,985.97,1028.034,994.744,1047.322,980.801,1048.584" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M440.902,754.71 C420.923,806.11 391.064,882.94 375.418,923.2 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="434.383,752.16,448.153,736.06,447.432,757.23,434.383,752.16" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M481.726,754.71 C502.329,806.11 533.121,882.94 549.257,923.2 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="475.192,757.22,474.249,736.06,488.187,752.02,475.192,757.22" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M944.353,736.19 C949.486,768.01 957.469,817.51 964.479,860.97 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="966.571,873.94,969.5638,867.3793,964.6588,862.0933,961.666,868.6541,966.571,873.94" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1362,785.32 C1362,822.26 1362,864.87 1362,897.5 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1362,910.83,1366,901.83,1362,905.83,1358,901.83,1362,910.83" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1362" x2="1362" y1="905.83" y2="897.83"/><polygon fill="none" points="1362,772.2,1358,778.2,1362,784.2,1366,778.2,1362,772.2" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1245.29,779.27 C1202.41,806.92 1153.6,838.4 1109.58,866.78 " fill="none" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1098.5,873.93,1108.2319,872.417,1102.7029,871.2215,1103.8983,865.6924,1098.5,873.93" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1102.7029" x2="1109.425" y1="871.2215" y2="866.885"/><polygon fill="none" points="1256.33,772.15,1249.1198,772.0379,1246.2431,778.6504,1253.4534,778.7625,1256.33,772.15" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1224.1453" y="788.1823">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1126.0664" y="863.0446">n</text><path d="M1109.61,1028.062 C1125.88,1035.65 1142.58,1042.545 1159,1048 C1331.69,1105.357 1397.12,1035.47 1564,1108 C1577.44,1113.84 1590.79,1120.373 1603.99,1127.455 " fill="none" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><path d="M661.627,1408.011 C651.106,1497.045 624.569,1721.627 615.276,1800.276 " fill="none" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><path d="M298.617,1408.011 C365.051,1497.045 532.628,1721.627 591.313,1800.276 " fill="none" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/></g></svg>